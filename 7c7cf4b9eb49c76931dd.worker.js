!function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=30)}([function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var u=e.length-1;u>=0;u--)(n=e[u])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.writeColor=void 0;const n=r(4),i=r(1);class o{constructor(e,t,r){this.x=0,this.y=0,this.z=0,this.x=null!=e?e:0,this.y=null!=t?t:0,this.z=null!=r?r:0}get array(){return[this.x,this.y,this.z]}set(e,t,r){this.x=e,this.y=t,this.z=r}copyTo(e){e.x=this.x,e.y=this.y,e.z=this.z}get r(){return this.x}set r(e){this.x=e}get g(){return this.y}set g(e){this.y=e}get b(){return this.z}set b(e){this.z=e}length(){return Math.sqrt(this.lengthSquared())}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}negate(){return new o(-this.x,-this.y,-this.z)}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}divideScalar(e){return this.x/=e,this.y/=e,this.z/=e,this}toString(){return`${this.x}, ${this.y}, ${this.z}`}static addVec3(e,t){return new o(e.x+t.x,e.y+t.y,e.z+t.z)}static subVec3(e,t){return new o(e.x-t.x,e.y-t.y,e.z-t.z)}static multVec3(e,t){return new o(e.x*t.x,e.y*t.y,e.z*t.z)}static multScalarVec3(e,t){return new o(t*e.x,t*e.y,t*e.z)}static divScalarVec(e,t){return new o(e.x/t,e.y/t,e.z/t)}static dot(e,t){return e.x*t.x+e.y*t.y+e.z*t.z}static cross(e,t){return new o(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z,e.x*t.y-e.y*t.x)}static unit_vector(e){return o.divScalarVec(e,e.length())}static random(){return new o(n.randomNumber(),n.randomNumber(),n.randomNumber())}static randomRange(e,t){return new o(n.randomNumberRange(e,t),n.randomNumberRange(e,t),n.randomNumberRange(e,t))}static randomInUnitSphere(){for(;;){const e=o.randomRange(-1,1);if(!(e.lengthSquared()>=1))return e}}static randomUnitVector(){const e=n.randomNumberRange(0,2*Math.PI),t=n.randomNumberRange(-1,1),r=Math.sqrt(1-t*t);return new o(r*Math.cos(e),r*Math.sin(e),t)}static randomInHemisphere(e){const t=o.randomInUnitSphere();return o.dot(t,e)>0?t:t.negate()}static reflect(e,t){return o.subVec3(e,o.multScalarVec3(t,2*o.dot(e,t)))}static refract(e,t,r){const a=o.dot(e.negate(),t),n=o.addVec3(e,o.multScalarVec3(t,a)),i=o.multScalarVec3(n,r),u=o.multScalarVec3(t,-Math.sqrt(1-i.lengthSquared()));return o.addVec3(i,u)}static randomInUnitdisk(){for(;;){const e=new o(n.randomNumberRange(-1,1),n.randomNumberRange(-1,1),0);if(!(e.lengthSquared()>=1))return e}}}a([i.autoserializeAs(Number)],o.prototype,"x",void 0),a([i.autoserializeAs(Number)],o.prototype,"y",void 0),a([i.autoserializeAs(Number)],o.prototype,"z",void 0),t.default=o,t.writeColor=function(e,t,r,a){let n=r.r,i=r.g,o=r.b;const u=1/a;n=Math.sqrt(u*n),i=Math.sqrt(u*i),o=Math.sqrt(u*o),e[t++]=255*n,e[t++]=255*i,e[t++]=255*o,e[t++]=255}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(2);a.__exportStar(r(33),t),a.__exportStar(r(61),t),a.__exportStar(r(3),t),a.__exportStar(r(68),t),a.__exportStar(r(69),t),a.__exportStar(r(11),t)},function(e,t,r){"use strict";r.r(t),r.d(t,"__extends",(function(){return n})),r.d(t,"__assign",(function(){return i})),r.d(t,"__rest",(function(){return o})),r.d(t,"__decorate",(function(){return u})),r.d(t,"__param",(function(){return s})),r.d(t,"__metadata",(function(){return l})),r.d(t,"__awaiter",(function(){return c})),r.d(t,"__generator",(function(){return f})),r.d(t,"__createBinding",(function(){return d})),r.d(t,"__exportStar",(function(){return p})),r.d(t,"__values",(function(){return y})),r.d(t,"__read",(function(){return h})),r.d(t,"__spread",(function(){return m})),r.d(t,"__spreadArrays",(function(){return g})),r.d(t,"__await",(function(){return b})),r.d(t,"__asyncGenerator",(function(){return z})),r.d(t,"__asyncDelegator",(function(){return v})),r.d(t,"__asyncValues",(function(){return _})),r.d(t,"__makeTemplateObject",(function(){return M})),r.d(t,"__importStar",(function(){return D})),r.d(t,"__importDefault",(function(){return w})),r.d(t,"__classPrivateFieldGet",(function(){return x})),r.d(t,"__classPrivateFieldSet",(function(){return S}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return(i=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r}function u(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var u=e.length-1;u>=0;u--)(n=e[u])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function s(e,t){return function(r,a){t(r,a,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,r,a){return new(r||(r=Promise))((function(n,i){function o(e){try{s(a.next(e))}catch(e){i(e)}}function u(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,u)}s((a=a.apply(e,t||[])).next())}))}function f(e,t){var r,a,n,i,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&i[0]?a.return:i[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,i[1])).done)return n;switch(a=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){o.label=i[1];break}if(6===i[0]&&o.label<n[1]){o.label=n[1],n=i;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(i);break}n[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function d(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function g(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var a=Array(e),n=0;for(t=0;t<r;t++)for(var i=arguments[t],o=0,u=i.length;o<u;o++,n++)a[n]=i[o];return a}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function z(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,n=r.apply(e,t||[]),i=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(e){n[e]&&(a[e]=function(t){return new Promise((function(r,a){i.push([e,t,r,a])>1||u(e,t)}))})}function u(e,t){try{(r=n[e](t)).value instanceof b?Promise.resolve(r.value.v).then(s,l):c(i[0][2],r)}catch(e){c(i[0][3],e)}var r}function s(e){u("next",e)}function l(e){u("throw",e)}function c(e,t){e(t),i.shift(),i.length&&u(i[0][0],i[0][1])}}function v(e){var t,r;return t={},a("next"),a("throw",(function(e){throw e})),a("return"),t[Symbol.iterator]=function(){return this},t;function a(a,n){t[a]=e[a]?function(t){return(r=!r)?{value:b(e[a](t)),done:"return"===a}:n?n(t):t}:n}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=y(e),t={},a("next"),a("throw"),a("return"),t[Symbol.asyncIterator]=function(){return this},t);function a(r){t[r]=e[r]&&function(t){return new Promise((function(a,n){(function(e,t,r,a){Promise.resolve(a).then((function(t){e({value:t,done:r})}),t)})(a,n,(t=e[r](t)).done,t.value)}))}}}function M(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function D(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function w(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function S(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},function(e,t,r){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),(a=t.InstantiationMethod||(t.InstantiationMethod={}))[a.None=0]="None",a[a.New=1]="New",a[a.ObjectCreate=2]="ObjectCreate"},function(e,t,r){"use strict";function a(){return Math.random()}Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=t.randomNumberRange=t.randomNumber=t.degreeToRadians=void 0,t.degreeToRadians=function(e){return e*Math.PI/180},t.randomNumber=a,t.randomNumberRange=function(e,t){return e+(t-e)*a()},t.clamp=function(e,t,r){return e<t?t:e>r?r:e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(3),n=r(11),i=new Map;var o;(o=t.MetaDataFlag||(t.MetaDataFlag={}))[o.DeserializePrimitive=2]="DeserializePrimitive",o[o.SerializePrimitive=4]="SerializePrimitive",o[o.DeserializeArray=8]="DeserializeArray",o[o.SerializeArray=16]="SerializeArray",o[o.DeserializeMap=32]="DeserializeMap",o[o.SerializeMap=64]="SerializeMap",o[o.DeserializeJSON=128]="DeserializeJSON",o[o.SerializeJSON=256]="SerializeJSON",o[o.DeserializeUsing=2048]="DeserializeUsing",o[o.SerializeUsing=4096]="SerializeUsing",o[o.DeserializeObject=8192]="DeserializeObject",o[o.SerializeObject=16384]="SerializeObject",o[o.AutoPrimitive=6]="AutoPrimitive",o[o.AutoUsing=6144]="AutoUsing";class u{constructor(e){this.transformKey=!0,this.keyName=e,this.serializedKey="",this.deserializedKey="",this.deserializedType=Function,this.serializedType=Function,this.flags=0}getSerializedKey(){return this.serializedKey===this.keyName?u.serializeKeyTransform(this.keyName):this.serializedKey?this.serializedKey:this.keyName}getDeserializedKey(){return this.deserializedKey===this.keyName?u.deserializeKeyTransform(this.keyName):u.deserializeKeyTransform(this.deserializedKey?this.deserializedKey:this.keyName)}static hasKeyName(e,t){for(var r=0;r<e.length;r++)if(e[r].keyName===t)return!0;return!1}static clone(e){const t=new u(e.keyName);return t.deserializedKey=e.deserializedKey,t.serializedKey=e.serializedKey,t.serializedType=e.serializedType,t.deserializedType=e.deserializedType,t.transformKey=e.transformKey,t.flags=e.flags,t}static getMetaData(e,t){var r=i.get(e);void 0===r&&(r=[],i.set(e,r));for(var a=0;a<r.length;a++)if(r[a].keyName===t)return r[a];return r.push(new u(t)),r[r.length-1]}static inheritMetaData(e,t){for(var r=i.get(e)||[],a=i.get(t)||[],n=0;n<r.length;n++){const e=r[n].keyName;u.hasKeyName(a,e)||a.push(u.clone(r[n]))}i.set(t,a)}static getMetaDataForType(e){return null!=e&&i.get(e)||null}}t.MetaData=u,u.TypeMap=i,u.serializeKeyTransform=n.NoOp,u.deserializeKeyTransform=n.NoOp,u.deserializeInstantationMethod=a.InstantiationMethod.New},function(e,t,r){var a=r(36);e.exports=function(e){return null==e?"":a(e)}},function(e,t,r){var a=r(12),n=r(42),i=r(43),o=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?n(e):i(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.rayColor=void 0;const n=a(r(0)),i=r(23);class o{constructor(e,t){e&&(this._orig=e),t&&(this._dir=t)}copyTo(e){e._orig=this._orig,e._dir=this._dir}get origin(){return this._orig}set origin(e){this._orig=e}get direction(){return this._dir}set direction(e){this._dir=e}at(e){return n.default.addVec3(this._orig,n.default.multScalarVec3(this._dir,e))}}t.default=o,t.rayColor=function e(t,r,a){const u=new i.HitRecord;if(a<=0)return new n.default(0,0,0);if(r.hit(t,.001,Number.POSITIVE_INFINITY,u)){const i=new o,s=new n.default;return u.mat.scatter(t,u,s,i)?n.default.multVec3(s,e(i,r,a-1)):new n.default(0,0,0)}const s=.5*(n.default.unit_vector(t.direction).y+1),l=n.default.multScalarVec3(new n.default(1,1,1),1-s),c=n.default.multScalarVec3(new n.default(.5,.7,1),s);return n.default.addVec3(l,c)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{scatter(e,t,r,a){return!1}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(2),n=a.__importDefault(r(34)),i=a.__importDefault(r(59)),o=a.__importDefault(r(60));t.NoOp=function(e){return e},t.CamelCase=function(e){return n.default(e)},t.SnakeCase=function(e){return i.default(e)},t.UnderscoreCase=function(e){return i.default(e)},t.DashCase=function(e){return o.default(e)}},function(e,t,r){var a=r(37).Symbol;e.exports=a},function(e,t,r){var a=r(51),n=r(52),i=r(55),o=RegExp("['’]","g");e.exports=function(e){return function(t){return a(i(n(t).replace(o,"")),e,"")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(2),n=r(3),i=a.__importDefault(r(17));t.getTarget=function(e,t,r){if(!i.default(t))return t;if(null!==e)switch(r){case n.InstantiationMethod.New:return new e;case n.InstantiationMethod.ObjectCreate:return Object.create(e.prototype)}return{}},t.isPrimitiveType=function(e){return e===String||e===Boolean||e===Number||e===Date||e===RegExp},t.setBitConditionally=function(e,t,r){return r?e|t:e&~t}},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(38))},function(e,t){var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return r.test(e)}},function(e,t){e.exports=function(e){return null==e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(2),n=a.__importDefault(r(17)),i=a.__importDefault(r(62)),o=a.__importDefault(r(19)),u=a.__importDefault(r(20)),s=a.__importDefault(r(63)),l=a.__importDefault(r(66));t.default={isNil:n.default,isDate:s.default,isRegExp:l.default,isUndefined:i.default,isObject:o.default,isFunction:u.default}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,r){var a=r(7),n=r(19);e.exports=function(e){if(!n(e))return!1;var t=a(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,r){(function(e){var a=r(15),n=t&&!t.nodeType&&t,i=n&&"object"==typeof e&&e&&!e.nodeType&&e,o=i&&i.exports===n&&a.process,u=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=u}).call(this,r(65)(e))},function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HitRecord=void 0;const n=a(r(0));t.HitRecord=class{constructor(){this.p=new n.default,this.normal=new n.default,this.t=0,this.front_face=!0}set_face_normal(e,t){this.front_face=n.default.dot(e.direction,t)<0,this.normal=this.front_face?t:t.negate()}copyTo(e){e.p=this.p,e.normal=this.normal,e.t=this.t,e.front_face=this.front_face,e.mat=this.mat}}},function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var u=e.length-1;u>=0;u--)(n=e[u])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HittableList=void 0;const i=r(1),o=n(r(25)),u=r(23),s=n(r(26));class l{constructor(e){this.objects=[],e&&this.add(e)}static onSerialized(e,t){const r=[];for(const e of t.objects)switch(e.constructor.name){case"Sphere":{const t=i.Serialize(e,s.default);t.type="Sphere",r.push(t);break}}return e.objects=r,e}static onDeserialized(e,t,r=i.InstantiationMethod.New){if(!t)switch(r){case i.InstantiationMethod.New:t=new l;break;case i.InstantiationMethod.ObjectCreate:t=Object.create(l.prototype);break;default:t={}}const a=e.objects;t.objects.length=0;for(const e of a)switch(e.type){case"Sphere":t.objects.push(i.Deserialize(e,s.default,null,i.InstantiationMethod.ObjectCreate))}return t}clear(){this.objects.length=0}add(e){this.objects.push(e)}hit(e,t,r,a){const n=new u.HitRecord;let i=!1,o=r;for(const r of this.objects)r.hit(e,t,o,n)&&(i=!0,o=n.t,n.copyTo(a));return i}}a([i.autoserializeAsArray(o.default)],l.prototype,"objects",void 0),t.HittableList=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{hit(e,t,r,a){return!1}}},function(e,t,r){"use strict";var a,n=this&&this.__decorate||function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var u=e.length-1;u>=0;u--)(n=e[u])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(1),u=i(r(10)),s=i(r(25)),l=i(r(27)),c=i(r(28)),f=i(r(29)),d=i(r(0));let p=a=class extends s.default{constructor(e,t,r){super(),this.center=e,this.radius=t,this.mat=r}static onSerialized(e,t){switch(t.mat.constructor.name){case"LambertianMaterial":e.mat=o.Serialize(t.mat,l.default),e.mat.type="LambertianMaterial";break;case"MetalMaterial":e.mat=o.Serialize(t.mat,c.default),e.mat.type="MetalMaterial";break;case"DielectricMaterial":e.mat=o.Serialize(t.mat,f.default),e.mat.type="DielectricMaterial"}return e}static onDeserialized(e,t,r=o.InstantiationMethod.New){if(!t)switch(r){case o.InstantiationMethod.ObjectCreate:t=Object.create(a.prototype);break;default:t={}}const n=e.mat;switch(n.type){case"LambertianMaterial":t.mat=o.Deserialize(n,l.default,null,o.InstantiationMethod.ObjectCreate);break;case"MetalMaterial":t.mat=o.Deserialize(n,c.default,null,o.InstantiationMethod.ObjectCreate);break;case"DielectricMaterial":t.mat=o.Deserialize(n,f.default,null,o.InstantiationMethod.ObjectCreate)}return t}hit(e,t,r,a){const n=d.default.subVec3(e.origin,this.center),i=e.direction.lengthSquared(),o=d.default.dot(n,e.direction),u=o*o-i*(n.lengthSquared()-this.radius*this.radius);if(u>0){const n=Math.sqrt(u);let s=(-o-n)/i;if(s<r&&s>t){a.t=s,a.p=e.at(a.t);const t=d.default.divScalarVec(d.default.subVec3(a.p,this.center),this.radius);return a.set_face_normal(e,t),a.mat=this.mat,!0}if(s=(-o+n)/i,s<r&&s>t){a.t=s,a.p=e.at(a.t);const t=d.default.divScalarVec(d.default.subVec3(a.p,this.center),this.radius);return a.set_face_normal(e,t),a.mat=this.mat,!0}}return!1}};n([o.autoserializeAs(d.default)],p.prototype,"center",void 0),n([o.autoserializeAs(Number)],p.prototype,"radius",void 0),n([o.autoserializeAs(u.default)],p.prototype,"mat",void 0),p=a=n([o.inheritSerialization(s.default)],p),t.default=p},function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var u=e.length-1;u>=0;u--)(n=e[u])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(1),o=n(r(10)),u=n(r(9)),s=n(r(0));class l extends o.default{constructor(e){super(),this.albedo=e}scatter(e,t,r,a){const n=s.default.addVec3(t.normal,s.default.randomUnitVector());return new u.default(t.p,n).copyTo(a),this.albedo.copyTo(r),!0}}a([i.autoserializeAs(s.default)],l.prototype,"albedo",void 0),t.default=l},function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var u=e.length-1;u>=0;u--)(n=e[u])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(1),o=n(r(10)),u=n(r(9)),s=n(r(0));class l extends o.default{constructor(e,t){super(),this.albedo=e,this.roughness=t}scatter(e,t,r,a){const n=s.default.reflect(s.default.unit_vector(e.direction),t.normal);return new u.default(t.p,s.default.addVec3(n,s.default.multScalarVec3(s.default.randomInUnitSphere(),this.roughness))).copyTo(a),this.albedo.copyTo(r),s.default.dot(a.direction,t.normal)>0}}a([i.autoserializeAs(s.default)],l.prototype,"albedo",void 0),a([i.autoserializeAs(Number)],l.prototype,"roughness",void 0),t.default=l},function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var u=e.length-1;u>=0;u--)(n=e[u])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(1),o=n(r(10)),u=n(r(9)),s=r(4),l=n(r(0));class c extends o.default{constructor(e){super(),this._refIdx=e}schlick(e,t){let r=(1-t)/(1+t);return r*=r,r+(1-r)*Math.pow(1-e,5)}scatter(e,t,r,a){r.set(1,1,1);const n=t.front_face?1/this._refIdx:this._refIdx,i=l.default.unit_vector(e.direction),o=Math.min(l.default.dot(i.negate(),t.normal),1);if(n*Math.sqrt(1-o*o)>1){const e=l.default.reflect(i,t.normal);return new u.default(t.p,e).copyTo(a),!0}const c=this.schlick(o,n);if(s.randomNumber()<c){const e=l.default.reflect(i,t.normal);return new u.default(t.p,e).copyTo(a),!0}const f=l.default.refract(i,t.normal,n);return new u.default(t.p,f).copyTo(a),!0}}a([i.autoserializeAs(Number)],c.prototype,"_refIdx",void 0),t.default=c},function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(r(31)),i=r(32),o=a(r(0)),u=a(r(70)),s=r(1),l=r(24),c=a(r(71)),f=self;let d,p,y,h,m;const g=new Map,b=e=>{const t=e.data;switch(t.cmd){case i.ComputeCommands.END:(e=>{const t=e.data.workerId,r=e.data.pixelArray,a=e.data.scanlineCount,n=e.data.startLine;let o=n*p*3,u=0;const s=n+a;for(let e=n;e<s;e++)for(let e=0;e<p;e++)d[o++]=r[u++],d[o++]=r[u++],d[o++]=r[u++];if(g.get(t).terminate(),g.delete(t),0===g.size){const e={cmd:i.ControllerCommands.END,data:{imageArray:d}};f.postMessage(e)}})(t)}};f.addEventListener("message",e=>{const t=e.data;switch(t.cmd){case i.ControllerCommands.START:(e=>{p=e.data.imageWidth,y=e.data.imageHeight,h=e.data.samplesPerPixel,m=e.data.maxBounces,d=new Uint8ClampedArray(p*y*3);const t=e.data.imageWidth/e.data.imageHeight,r=new o.default(13,2,3),a=new o.default(0,0,0),f=new o.default(0,-1,0),z=new u.default(r,a,f,20,t,.1,10),v=c.default();let _=0,M=e.data.imageHeight;const D=Math.ceil(M/e.data.computeWorkers);for(let t=0;t<e.data.computeWorkers;t++){const r=new n.default;r.onmessage=b;const a={cmd:i.ComputeCommands.START,data:{workerId:t,camera:s.Serialize(z,u.default),world:s.Serialize(v,l.HittableList),imageWidth:e.data.imageWidth,imageHeight:e.data.imageHeight,scanlineCount:M-D<0?M:D,startLine:_,samplesPerPixel:h,maxBounces:m}};r.postMessage(a),g.set(t,r),M-=D,_+=D}})(t);break;case i.ControllerCommands.STOP:(()=>{console.log("controller stop");for(const[e,t]of g)t.terminate(),g.delete(e);const e={cmd:i.ControllerCommands.END,data:{imageArray:d}};f.postMessage(e)})()}})},function(e,t,r){e.exports=function(){return new Worker(r.p+"93e1a8f6fe3d624cc01e.worker.js")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComputeCommands=t.ControllerCommands=void 0,function(e){e[e.START=0]="START",e[e.STOP=1]="STOP",e[e.END=2]="END"}(t.ControllerCommands||(t.ControllerCommands={})),function(e){e[e.START=0]="START",e[e.END=1]="END"}(t.ComputeCommands||(t.ComputeCommands={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(5),n=r(14);t.serializeUsing=function(e,t){return function(r,n){const i=a.MetaData.getMetaData(r.constructor,n);i.serializedKey=t||n,i.serializedType=e,i.flags|=a.MetaDataFlag.SerializeUsing}},t.serializeAs=function(e,t){return function(r,i){const o=a.MetaData.getMetaData(r.constructor,i);o.serializedKey=t||i,o.serializedType=e,o.flags|=a.MetaDataFlag.SerializeObject,o.flags=n.setBitConditionally(o.flags,a.MetaDataFlag.SerializePrimitive,n.isPrimitiveType(e))}},t.serializeAsArray=function(e,t){return function(r,i){const o=a.MetaData.getMetaData(r.constructor,i);o.serializedKey=t||i,o.serializedType=e,o.flags|=a.MetaDataFlag.SerializeArray,o.flags=n.setBitConditionally(o.flags,a.MetaDataFlag.SerializePrimitive,n.isPrimitiveType(e))}},t.serializeAsMap=function(e,t){return function(r,i){const o=a.MetaData.getMetaData(r.constructor,i);o.serializedKey=t||i,o.serializedType=e,o.flags|=a.MetaDataFlag.SerializeMap,o.flags=n.setBitConditionally(o.flags,a.MetaDataFlag.SerializePrimitive,n.isPrimitiveType(e))}},t.serializeAsJson=function({keyName:e,transformKey:t}={transformKey:!0}){return function(r,n){const i=a.MetaData.getMetaData(r.constructor,n);i.serializedKey=e||n,i.flags|=a.MetaDataFlag.SerializeJSON,i.transformKey=t}},t.deserializeUsing=function(e,t){return function(r,n){const i=a.MetaData.getMetaData(r.constructor,n);i.deserializedKey=t||n,i.deserializedType=e,i.flags|=a.MetaDataFlag.DeserializeUsing}},t.deserializeAs=function(e,t){return function(r,i){const o=a.MetaData.getMetaData(r.constructor,i);o.deserializedKey=t||i,o.deserializedType=e,o.flags|=a.MetaDataFlag.DeserializeObject,o.flags=n.setBitConditionally(o.flags,a.MetaDataFlag.DeserializePrimitive,n.isPrimitiveType(e))}},t.deserializeAsArray=function(e,t){return function(r,i){const o=a.MetaData.getMetaData(r.constructor,i);o.deserializedKey=t||i,o.deserializedType=e,o.flags|=a.MetaDataFlag.DeserializeArray,o.flags=n.setBitConditionally(o.flags,a.MetaDataFlag.DeserializePrimitive,n.isPrimitiveType(e))}},t.deserializeAsMap=function(e,t){return function(r,i){const o=a.MetaData.getMetaData(r.constructor,i);o.deserializedKey=t||i,o.deserializedType=e,o.flags|=a.MetaDataFlag.DeserializeMap,o.flags=n.setBitConditionally(o.flags,a.MetaDataFlag.DeserializePrimitive,n.isPrimitiveType(e))}},t.deserializeAsJson=function({keyName:e,transformKey:t}={transformKey:!0}){return function(r,n){const i=a.MetaData.getMetaData(r.constructor,n);i.deserializedKey=e||n,i.flags|=a.MetaDataFlag.DeserializeJSON,i.transformKey=t}},t.autoserializeUsing=function(e,t){return function(r,n){const i=a.MetaData.getMetaData(r.constructor,n),o=t||n;i.serializedKey=o,i.deserializedKey=o,i.serializedType=e.Serialize,i.deserializedType=e.Deserialize,i.flags|=a.MetaDataFlag.AutoUsing}},t.autoserializeAs=function(e,t){return function(r,i){const o=a.MetaData.getMetaData(r.constructor,i),u=t||i;o.deserializedKey=u,o.serializedKey=u,o.deserializedType=e,o.serializedType=e,o.flags|=a.MetaDataFlag.SerializeObject|a.MetaDataFlag.DeserializeObject,o.flags=n.setBitConditionally(o.flags,a.MetaDataFlag.AutoPrimitive,n.isPrimitiveType(e))}},t.autoserializeAsArray=function(e,t){return function(r,i){const o=a.MetaData.getMetaData(r.constructor,i),u=t||i;o.deserializedKey=u,o.serializedKey=u,o.deserializedType=e,o.serializedType=e,o.flags|=a.MetaDataFlag.SerializeArray|a.MetaDataFlag.DeserializeArray,o.flags=n.setBitConditionally(o.flags,a.MetaDataFlag.AutoPrimitive,n.isPrimitiveType(e))}},t.autoserializeAsMap=function(e,t){return function(r,i){const o=a.MetaData.getMetaData(r.constructor,i),u=t||i;o.deserializedKey=u,o.serializedKey=u,o.deserializedType=e,o.serializedType=e,o.flags|=a.MetaDataFlag.SerializeMap|a.MetaDataFlag.DeserializeMap,o.flags=n.setBitConditionally(o.flags,a.MetaDataFlag.AutoPrimitive,n.isPrimitiveType(e))}},t.autoserializeAsJson=function({keyName:e,transformKey:t}={transformKey:!0}){return function(r,n){const i=a.MetaData.getMetaData(r.constructor,n),o=e||n;i.deserializedKey=o,i.serializedKey=o,i.flags|=a.MetaDataFlag.SerializeJSON|a.MetaDataFlag.DeserializeJSON,i.transformKey=t}},t.inheritSerialization=function(e){return function(t){a.MetaData.inheritMetaData(e,t)}}},function(e,t,r){var a=r(35),n=r(13)((function(e,t,r){return t=t.toLowerCase(),e+(r?a(t):t)}));e.exports=n},function(e,t,r){var a=r(6),n=r(44);e.exports=function(e){return n(a(e).toLowerCase())}},function(e,t,r){var a=r(12),n=r(39),i=r(40),o=r(41),u=a?a.prototype:void 0,s=u?u.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return n(t,e)+"";if(o(t))return s?s.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},function(e,t,r){var a=r(15),n="object"==typeof self&&self&&self.Object===Object&&self,i=a||n||Function("return this")();e.exports=i},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){e.exports=function(e,t){for(var r=-1,a=null==e?0:e.length,n=Array(a);++r<a;)n[r]=t(e[r],r,e);return n}},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){var a=r(7),n=r(8);e.exports=function(e){return"symbol"==typeof e||n(e)&&"[object Symbol]"==a(e)}},function(e,t,r){var a=r(12),n=Object.prototype,i=n.hasOwnProperty,o=n.toString,u=a?a.toStringTag:void 0;e.exports=function(e){var t=i.call(e,u),r=e[u];try{e[u]=void 0;var a=!0}catch(e){}var n=o.call(e);return a&&(t?e[u]=r:delete e[u]),n}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var a=r(45)("toUpperCase");e.exports=a},function(e,t,r){var a=r(46),n=r(16),i=r(48),o=r(6);e.exports=function(e){return function(t){t=o(t);var r=n(t)?i(t):void 0,u=r?r[0]:t.charAt(0),s=r?a(r,1).join(""):t.slice(1);return u[e]()+s}}},function(e,t,r){var a=r(47);e.exports=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:a(e,t,r)}},function(e,t){e.exports=function(e,t,r){var a=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(r=r>n?n:r)<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(n);++a<n;)i[a]=e[a+t];return i}},function(e,t,r){var a=r(49),n=r(16),i=r(50);e.exports=function(e){return n(e)?i(e):a(e)}},function(e,t){e.exports=function(e){return e.split("")}},function(e,t){var r="[\\ud800-\\udfff]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+a+"|"+n+")"+"?",l="[\\ufe0e\\ufe0f]?"+s+("(?:\\u200d(?:"+[i,o,u].join("|")+")[\\ufe0e\\ufe0f]?"+s+")*"),c="(?:"+[i+a+"?",a,o,u,r].join("|")+")",f=RegExp(n+"(?="+n+")|"+c+l,"g");e.exports=function(e){return e.match(f)||[]}},function(e,t){e.exports=function(e,t,r,a){var n=-1,i=null==e?0:e.length;for(a&&i&&(r=e[++n]);++n<i;)r=t(r,e[n],n,e);return r}},function(e,t,r){var a=r(53),n=r(6),i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=n(e))&&e.replace(i,a).replace(o,"")}},function(e,t,r){var a=r(54)({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});e.exports=a},function(e,t){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},function(e,t,r){var a=r(56),n=r(57),i=r(6),o=r(58);e.exports=function(e,t,r){return e=i(e),void 0===(t=r?void 0:t)?n(e)?o(e):a(e):e.match(t)||[]}},function(e,t){var r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(r)||[]}},function(e,t){var r=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return r.test(e)}},function(e,t){var r="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+r+"]",n="\\d+",i="[\\u2700-\\u27bf]",o="[a-z\\xdf-\\xf6\\xf8-\\xff]",u="[^\\ud800-\\udfff"+r+n+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",c="[A-Z\\xc0-\\xd6\\xd8-\\xde]",f="(?:"+o+"|"+u+")",d="(?:"+c+"|"+u+")",p="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",y="[\\ufe0e\\ufe0f]?"+p+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",s,l].join("|")+")[\\ufe0e\\ufe0f]?"+p+")*"),h="(?:"+[i,s,l].join("|")+")"+y,m=RegExp([c+"?"+o+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[a,c,"$"].join("|")+")",d+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[a,c+f,"$"].join("|")+")",c+"?"+f+"+(?:['’](?:d|ll|m|re|s|t|ve))?",c+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",n,h].join("|"),"g");e.exports=function(e){return e.match(m)||[]}},function(e,t,r){var a=r(13)((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));e.exports=a},function(e,t,r){var a=r(13)((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}));e.exports=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(2),n=r(3),i=r(14),o=r(5),u=a.__importDefault(r(18));function s(e,t,r,a){if(u.default.isUndefined(a)&&(a=o.MetaData.deserializeInstantationMethod),"object"!=typeof e)throw new Error("Expected input to be of type `object` but received: "+typeof e);if(u.default.isNil(r)&&(r={}),u.default.isNil(e))return null;const n=Object.keys(e);for(const i of n){const n=e[i];u.default.isUndefined(n)||(r[o.MetaData.deserializeKeyTransform(i)]=d(e[i],t,r[i],a))}return r}function l(e,t,r,a){if(u.default.isUndefined(a)&&(a=o.MetaData.deserializeInstantationMethod),!Array.isArray(e))throw new Error("Expected input to be an array but received: "+typeof e);return Array.isArray(r)||(r=new Array),r=e.map((e,n)=>d(e,t,r[n],a))}function c(e,t,r){if(t!==Date){if(t===RegExp){const t=e.match(/\/(.*?)\/([gimy])?$/);return new RegExp(t[1],t[2]||"")}return null===e?null:t(e)}{const t=new Date(e);if(!(r instanceof Date))return t;r.setTime(t.getTime())}}function f(e,t=!0,r){if(Array.isArray(e))return Array.isArray(r)||(r=new Array(e.length)),r=e.map((e,a)=>f(e,t,r[a]));if(u.default.isObject(e)){const a=u.default.isObject(r)?r:{},n=Object.keys(e);for(const r of n){const n=e[r];u.default.isUndefined(n)||(a[t?o.MetaData.deserializeKeyTransform(r):r]=f(e[r],t))}return a}if(u.default.isFunction(e))throw new Error("Cannot deserialize a function, input is not a valid json object");return e}function d(e,t,r,a){if(null===e)return null;const p=o.MetaData.getMetaDataForType(t);if(null===p){if("function"==typeof t){if(i.isPrimitiveType(t))return c(e,t,r);switch(a){case n.InstantiationMethod.New:return new t;case n.InstantiationMethod.ObjectCreate:return Object.create(t.prototype);default:return{}}}return null}r=i.getTarget(t,r,a);for(let t=0;t<p.length;t++){const n=p[t];if(null===n.deserializedKey)continue;const i=e[n.transformKey?n.getDeserializedKey():n.deserializedKey];if(u.default.isUndefined(i))continue;let y=n.keyName;const h=n.flags;r&&(0!=(h&o.MetaDataFlag.DeserializeMap)?r[y]=s(i,n.deserializedType,r[y],a):0!=(h&o.MetaDataFlag.DeserializeArray)?r[y]=l(i,n.deserializedType,r[y],a):0!=(h&o.MetaDataFlag.DeserializePrimitive)?r[y]=c(i,n.deserializedType,r[y]):0!=(h&o.MetaDataFlag.DeserializeObject)?r[y]=d(i,n.deserializedType,r[y],a):0!=(h&o.MetaDataFlag.DeserializeJSON)?r[y]=f(i,n.transformKey,a):0!=(h&o.MetaDataFlag.DeserializeUsing)&&(r[y]=n.deserializedType(i,r[y],a)))}if(u.default.isFunction(t.onDeserialized)){const n=t.onDeserialized(e,r,a);if(void 0!==n)return n}return r}t.DeserializeMap=s,t.DeserializeArray=l,t.DeserializeJSON=f,t.Deserialize=function(e,t,r,a){return u.default.isUndefined(a)&&(a=o.MetaData.deserializeInstantationMethod),d(e,t,r,a)},t.DeserializeRaw=function(e,t,r){return d(e,t,r,n.InstantiationMethod.None)},t.DeserializeArrayRaw=function(e,t,r){return l(e,t,r,n.InstantiationMethod.None)},t.DeserializeMapRaw=function(e,t,r){return s(e,t,r,n.InstantiationMethod.None)}},function(e,t){e.exports=function(e){return void 0===e}},function(e,t,r){var a=r(64),n=r(21),i=r(22),o=i&&i.isDate,u=o?n(o):a;e.exports=u},function(e,t,r){var a=r(7),n=r(8);e.exports=function(e){return n(e)&&"[object Date]"==a(e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var a=r(67),n=r(21),i=r(22),o=i&&i.isRegExp,u=o?n(o):a;e.exports=u},function(e,t,r){var a=r(7),n=r(8);e.exports=function(e){return n(e)&&"[object RegExp]"==a(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(2),n=r(14),i=r(5),o=a.__importDefault(r(18)),u=a.__importDefault(r(8));function s(e,t){const r={};return Object.keys(e).forEach(a=>{const n=e[a];o.default.isUndefined(n)||(r[i.MetaData.serializeKeyTransform(a)]=d(n,t))}),r}function l(e,t){return e.map(e=>d(e,t))}function c(e,t){if(o.default.isNil(e))return null;switch(t){case Boolean:return Boolean(e);case Number:const t=Number(e);return isNaN(t)?null:t;case String:case Date:case RegExp:default:return e.toString()}}function f(e,t=!0){if(o.default.isNil(e))return null;if(Array.isArray(e))return e.map(e=>f(e,t));if(u.default(e)){if(o.default.isDate(e)||o.default.isRegExp(e))return e.toString();{const r={};return Object.keys(e).forEach(a=>{const n=e[a];if(!o.default.isUndefined(n)){const e=t?i.MetaData.serializeKeyTransform(a):a;r[e]=f(n,t)}}),r}}return o.default.isFunction(e)?null:e}function d(e,t){if(o.default.isNil(e))return null;const r=i.MetaData.getMetaDataForType(t);if(null===r)return n.isPrimitiveType(t)?c(e,t):{};const a={};if(r.forEach(t=>{if(null===t.serializedKey)return;const r=e[t.keyName];if(o.default.isUndefined(r))return;const n=t.getSerializedKey();a[n]=function(e,t){const r=t.flags;switch(!0){case!!(r&i.MetaDataFlag.SerializeMap):return s(e,t.serializedType);case!!(r&i.MetaDataFlag.SerializeArray):return l(e,t.serializedType);case!!(r&i.MetaDataFlag.SerializePrimitive):return c(e,t.serializedType);case!!(r&i.MetaDataFlag.SerializeObject):return d(e,t.serializedType);case!!(r&i.MetaDataFlag.SerializeJSON):return f(e,t.transformKey);case!!(r&i.MetaDataFlag.SerializeUsing):return t.serializedType(e);default:return null}}(r,t)}),o.default.isFunction(t.onSerialized)){const r=t.onSerialized(a,e);if(!o.default.isUndefined(r))return r}return a}t.SerializeMap=s,t.SerializeArray=l,t.SerializePrimitive=c,t.SerializeJSON=f,t.Serialize=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(2),n=r(5),i=r(11),o=r(3),u=a.__importDefault(r(20));t.SetSerializeKeyTransform=function(e){n.MetaData.serializeKeyTransform=u.default(e)?e:i.NoOp},t.SetDeserializeKeyTransform=function(e){n.MetaData.deserializeKeyTransform=u.default(e)?e:i.NoOp},t.SetDefaultInstantiationMethod=function(e){n.MetaData.deserializeInstantationMethod=null===e?o.InstantiationMethod.New:e}},function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var u=e.length-1;u>=0;u--)(n=e[u])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(0)),o=n(r(9)),u=r(4),s=r(1);class l{constructor(e,t,r,a,n,o,s){const l=u.degreeToRadians(a),c=2*Math.tan(l/2),f=n*c;this.w=i.default.unit_vector(i.default.subVec3(e,t)),this.u=i.default.unit_vector(i.default.cross(r,this.w)),this.v=i.default.cross(this.w,this.u),this.lookFrom=e,this.horizontal=i.default.multScalarVec3(this.u,s*f),this.vertical=i.default.multScalarVec3(this.v,s*c);const d=i.default.divScalarVec(this.horizontal,2),p=i.default.divScalarVec(this.vertical,2),y=i.default.multScalarVec3(this.w,s);this.lowerLeftCorner=i.default.subVec3(i.default.subVec3(i.default.subVec3(this.lookFrom,d),p),y),this.lenseRadius=o/2}getRay(e,t){const r=i.default.multScalarVec3(i.default.randomInUnitdisk(),this.lenseRadius),a=i.default.multScalarVec3(this.u,r.x),n=i.default.multScalarVec3(this.v,r.y),u=i.default.addVec3(a,n),s=i.default.multScalarVec3(this.horizontal,e),l=i.default.multScalarVec3(this.vertical,t);return new o.default(i.default.addVec3(this.lookFrom,u),i.default.subVec3(i.default.subVec3(i.default.addVec3(i.default.addVec3(this.lowerLeftCorner,s),l),this.lookFrom),u))}getUniformArray(){const e=[];return e.push(...this.lookFrom.array,0),e.push(...this.lowerLeftCorner.array,0),e.push(...this.horizontal.array,0),e.push(...this.vertical.array,0),e.push(...this.u.array,0),e.push(...this.v.array,0),e.push(...this.w.array,0),e.push(this.lenseRadius),new Float32Array(e)}}a([s.autoserializeAs(i.default)],l.prototype,"lookFrom",void 0),a([s.autoserializeAs(i.default)],l.prototype,"lowerLeftCorner",void 0),a([s.autoserializeAs(i.default)],l.prototype,"horizontal",void 0),a([s.autoserializeAs(i.default)],l.prototype,"vertical",void 0),a([s.autoserializeAs(i.default)],l.prototype,"u",void 0),a([s.autoserializeAs(i.default)],l.prototype,"v",void 0),a([s.autoserializeAs(i.default)],l.prototype,"w",void 0),a([s.autoserializeAs(Number)],l.prototype,"lenseRadius",void 0),t.default=l},function(e,t,r){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(r(29)),i=r(24),o=a(r(27)),u=a(r(28)),s=a(r(26)),l=r(4),c=a(r(0));t.default=function(){const e=new i.HittableList,t=new o.default(new c.default(.5,.5,.5));e.add(new s.default(new c.default(0,-1e3,0),1e3,t));let r=1;for(let t=-11;t<11;t++)for(let a=-11;a<11;a++){console.log(""+r++);const i=l.randomNumber(),f=new c.default(t+.9*l.randomNumber(),.2,a+.9*l.randomNumber());if(c.default.subVec3(f,new c.default(4,.2,0)).length()>.9){let t;if(i<.8){const e=c.default.multVec3(c.default.random(),c.default.random());t=new o.default(e)}else if(i<.95){const e=c.default.randomRange(.5,1),r=l.randomNumberRange(0,.5);t=new u.default(e,r)}else t=new n.default(1.5);e.add(new s.default(f,.2,t))}}const a=new n.default(1.5),f=new o.default(new c.default(.4,.2,.1)),d=new u.default(new c.default(.7,.6,.5),0);return e.add(new s.default(new c.default(1,1,0),1,a)),e.add(new s.default(new c.default(-4,1,0),1,f)),e.add(new s.default(new c.default(4,1,0),1,d)),e}}]);