!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=10)}([function(t,e,r){"use strict";var n,a=this&&this.__decorate||function(t,e,r,n){var a,o=arguments.length,i=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i};Object.defineProperty(e,"__esModule",{value:!0}),e.writeColor=void 0;const o=r(2),i=r(1);let s=n=class{constructor(t,e,r){this.x=0,this.y=0,this.z=0,this.x=null!=t?t:0,this.y=null!=e?e:0,this.z=null!=r?r:0}get array(){return[this.x,this.y,this.z]}set(t,e,r){this.x=t,this.y=e,this.z=r}copyTo(t){t.x=this.x,t.y=this.y,t.z=this.z}get r(){return this.x}set r(t){this.x=t}get g(){return this.y}set g(t){this.y=t}get b(){return this.z}set b(t){this.z=t}length(){return Math.sqrt(this.lengthSquared())}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}negate(){return new n(-this.x,-this.y,-this.z)}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}divideScalar(t){return this.x/=t,this.y/=t,this.z/=t,this}toString(){return`${this.x}, ${this.y}, ${this.z}`}static addVec3(t,e){return new n(t.x+e.x,t.y+e.y,t.z+e.z)}static subVec3(t,e){return new n(t.x-e.x,t.y-e.y,t.z-e.z)}static multVec3(t,e){return new n(t.x*e.x,t.y*e.y,t.z*e.z)}static multScalarVec3(t,e){return new n(e*t.x,e*t.y,e*t.z)}static divScalarVec(t,e){return new n(t.x/e,t.y/e,t.z/e)}static dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static cross(t,e){return new n(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)}static unit_vector(t){return n.divScalarVec(t,t.length())}static random(){return new n(o.randomNumber(),o.randomNumber(),o.randomNumber())}static randomRange(t,e){return new n(o.randomNumberRange(t,e),o.randomNumberRange(t,e),o.randomNumberRange(t,e))}static randomInUnitSphere(){for(;;){const t=n.randomRange(-1,1);if(!(t.lengthSquared()>=1))return t}}static randomUnitVector(){const t=o.randomNumberRange(0,2*Math.PI),e=o.randomNumberRange(-1,1),r=Math.sqrt(1-e*e);return new n(r*Math.cos(t),r*Math.sin(t),e)}static randomInHemisphere(t){const e=n.randomInUnitSphere();return n.dot(e,t)>0?e:e.negate()}static reflect(t,e){return n.subVec3(t,n.multScalarVec3(e,2*n.dot(t,e)))}static refract(t,e,r){const a=n.dot(t.negate(),e),o=n.addVec3(t,n.multScalarVec3(e,a)),i=n.multScalarVec3(o,r),s=n.multScalarVec3(e,-Math.sqrt(1-i.lengthSquared()));return n.addVec3(i,s)}static randomInUnitdisk(){for(;;){const t=new n(o.randomNumberRange(-1,1),o.randomNumberRange(-1,1),0);if(!(t.lengthSquared()>=1))return t}}};s=n=a([i.serializable],s),e.default=s,e.writeColor=function(t,e,r,n){let a=r.r,o=r.g,i=r.b;const s=1/n;a=Math.sqrt(s*a),o=Math.sqrt(s*o),i=Math.sqrt(s*i),t[e++]=255*a,t[e++]=255*o,t[e++]=255*i,t[e++]=255}},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),a=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),a(r(4),e),a(r(13),e),a(r(14),e),a(r(15),e)},function(t,e,r){"use strict";function n(){return Math.random()}function a(t,e){return t+(e-t)*n()}Object.defineProperty(e,"__esModule",{value:!0}),e.sortArrayRange=e.randomInt=e.clamp=e.randomNumberRange=e.randomNumber=e.degreeToRadians=void 0,e.degreeToRadians=function(t){return t*Math.PI/180},e.randomNumber=n,e.randomNumberRange=a,e.clamp=function(t,e,r){return t<e?e:t>r?r:t},e.randomInt=function(t,e){return Math.floor(a(t,e+1))},e.sortArrayRange=function(t,e,r,n){t=[].concat(...t.slice(0,e),...t.slice(e,e+r).sort(n),...t.slice(e+r,t.length))}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.rayColor=void 0;const a=n(r(0)),o=r(5);class i{constructor(t,e){t&&(this._orig=t),e&&(this._dir=e)}copyTo(t){t._orig=this._orig,t._dir=this._dir}get origin(){return this._orig}set origin(t){this._orig=t}get direction(){return this._dir}set direction(t){this._dir=t}at(t){return a.default.addVec3(this._orig,a.default.multScalarVec3(this._dir,t))}}e.default=i,e.rayColor=function t(e,r,n){const s=new o.HitRecord;if(n<=0)return new a.default(0,0,0);if(r.hit(e,.001,Number.POSITIVE_INFINITY,s)){const o=new i,u=new a.default;return s.mat.scatter(e,s,u,o)?a.default.multVec3(u,t(o,r,n-1)):new a.default(0,0,0)}const u=.5*(a.default.unit_vector(e.direction).y+1),c=a.default.multScalarVec3(new a.default(1,1,1),1-u),l=a.default.multScalarVec3(new a.default(.5,.7,1),u);return a.default.addVec3(c,l)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CLASSNAME_KEY=void 0,e.CLASSNAME_KEY="__CLASSNAME__"},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Hittable=e.HitRecord=void 0;const a=n(r(0));e.HitRecord=class{constructor(){this.p=new a.default,this.normal=new a.default,this.t=0,this.front_face=!0}set_face_normal(t,e){this.front_face=a.default.dot(t.direction,e)<0,this.normal=this.front_face?e:e.negate()}copyTo(t){t.p=this.p,t.normal=this.normal,t.t=this.t,t.front_face=this.front_face,t.mat=this.mat}};e.Hittable=class{}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getClassConstructor=e.addClassName=void 0;const n=new Map;e.addClassName=function(t){n.set(t.name,t)},e.getClassConstructor=function(t){return n.has(t)?n.get(t):(console.error(t+" not serializable, use the @serializable decorator"),null)}},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var a,o=arguments.length,i=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.HittableList=void 0;const o=r(5),i=a(r(9)),s=r(1);let u=class extends o.Hittable{constructor(t){super(),this._objects=[],t&&this.add(t)}get objects(){return this._objects}clear(){this._objects.length=0}add(t){this._objects.push(t)}hit(t,e,r,n){const a=new o.HitRecord;let i=!1,s=r;for(const r of this._objects)r.hit(t,e,s,a)&&(i=!0,s=a.t,a.copyTo(n));return i}boundingBox(t){if(0===this._objects.length)return!1;const e=new i.default;let r=!0;for(const n of this._objects){if(!n.boundingBox(e))return!1;r?e.copyTo(t):i.default.surroundingBox(t,e).copyTo(t),r=!1}return!0}};u=n([s.serializable],u),e.HittableList=u},function(t,e,r){"use strict";var n,a=this&&this.__decorate||function(t,e,r,n){var a,o=arguments.length,i=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=o(r(0)),s=r(1);let u=n=class{constructor(t,e){this._min=null!=t?t:new i.default,this._max=null!=e?e:new i.default}copyTo(t){t._min=this._min,t._max=this._max}get min(){return this._min}get max(){return this._max}hit(t,e,r){for(let n=0;n<3;n++){const a=1/t.direction.array[n];let o=(this._min.array[n]-t.origin.array[n])*a,i=(this._max.array[n]-t.origin.array[n])*a;if(a<0){const t=o;o=i,i=t}if((r=i<r?i:r)<=(e=o>e?o:e))return!1}return!0}static surroundingBox(t,e){const r=new i.default(Math.min(t.min.x,e.min.x),Math.min(t.min.y,e.min.y),Math.min(t.min.z,e.min.z)),a=new i.default(Math.max(t.max.x,e.max.x),Math.max(t.max.y,e.max.y),Math.max(t.max.z,e.max.z));return new n(r,a)}};u=n=a([s.serializable],u),e.default=u},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=n(r(11)),o=r(12),i=n(r(0)),s=n(r(16)),u=r(8),c=n(r(17)),l=r(1),d=self;let f,h,m,_,p;const y=new Map,b=t=>{const e=t.data;switch(e.cmd){case o.ComputeCommands.END:(t=>{const e=t.data.workerId,r=t.data.pixelArray,n=t.data.scanlineCount,a=t.data.startLine;let i=a*h*3,s=0;const u=a+n;for(let t=a;t<u;t++)for(let t=0;t<h;t++)f[i++]=r[s++],f[i++]=r[s++],f[i++]=r[s++];if(y.get(e).terminate(),y.delete(e),0===y.size){const t={cmd:o.ControllerCommands.END,data:{imageArray:f}};d.postMessage(t)}})(e)}};d.addEventListener("message",t=>{const e=t.data;switch(e.cmd){case o.ControllerCommands.START:(t=>{h=t.data.imageWidth,m=t.data.imageHeight,_=t.data.samplesPerPixel,p=t.data.maxBounces,f=new Uint8ClampedArray(h*m*3);const e=t.data.imageWidth/t.data.imageHeight,r=new i.default(13,2,3),n=new i.default(0,0,0),d=new i.default(0,-1,0),g=new s.default;g.init(r,n,d,20,e,.1,10);const w=c.default();let v=0,x=t.data.imageHeight;const M=Math.ceil(x/t.data.computeWorkers);for(let e=0;e<t.data.computeWorkers;e++){const r=new a.default;r.onmessage=b;const n={cmd:o.ComputeCommands.START,data:{workerId:e,camera:l.serialize(s.default,g),world:l.serialize(u.HittableList,w),imageWidth:t.data.imageWidth,imageHeight:t.data.imageHeight,scanlineCount:x-M<0?x:M,startLine:v,samplesPerPixel:_,maxBounces:p}};r.postMessage(n),y.set(e,r),x-=M,v+=M}})(e);break;case o.ControllerCommands.STOP:(()=>{console.log("controller stop");for(const[t,e]of y)e.terminate(),y.delete(t);const t={cmd:o.ControllerCommands.END,data:{imageArray:f}};d.postMessage(t)})()}})},function(t,e,r){t.exports=function(){return new Worker(r.p+"d31cc577622a363d1015.worker.js")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComputeCommands=e.ControllerCommands=void 0,function(t){t[t.START=0]="START",t[t.STOP=1]="STOP",t[t.END=2]="END"}(e.ControllerCommands||(e.ControllerCommands={})),function(t){t[t.START=0]="START",t[t.END=1]="END"}(e.ComputeCommands||(e.ComputeCommands={}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.serialize=void 0;const n=r(4);e.serialize=function(t,e){return function t(e,r){const a={},o=Object.getOwnPropertyNames(r);for(const e of o){const n=r[e];Array.isArray(n)?a[e]=n.map(e=>t(e.constructor,e)):a[e]="object"==typeof n?t(n.constructor,n):n}return a[n.CLASSNAME_KEY]=r.constructor.name,a}(0,e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deserialize=void 0;const n=r(4),a=r(7);e.deserialize=function(t,e){return function t(e,r){const o=Object.create(e.prototype);for(const e in r){const i=r[e];if(Array.isArray(i))o[e]=i.map(e=>t(a.getClassConstructor(e[n.CLASSNAME_KEY]),e));else if("object"==typeof i){const r=a.getClassConstructor(i[n.CLASSNAME_KEY]);o[e]=t(r,i)}else o[e]=i}return o}(t,e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.serializable=void 0;const n=r(7);e.serializable=function(t){n.addClassName(t)}},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var a,o=arguments.length,i=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=a(r(0)),i=a(r(3)),s=r(2),u=r(1);let c=class{constructor(){}init(t,e,r,n,a,i,u){const c=s.degreeToRadians(n),l=2*Math.tan(c/2),d=a*l;this.w=o.default.unit_vector(o.default.subVec3(t,e)),this.u=o.default.unit_vector(o.default.cross(r,this.w)),this.v=o.default.cross(this.w,this.u),this.lookFrom=t,this.horizontal=o.default.multScalarVec3(this.u,u*d),this.vertical=o.default.multScalarVec3(this.v,u*l);const f=o.default.divScalarVec(this.horizontal,2),h=o.default.divScalarVec(this.vertical,2),m=o.default.multScalarVec3(this.w,u);this.lowerLeftCorner=o.default.subVec3(o.default.subVec3(o.default.subVec3(this.lookFrom,f),h),m),this.lenseRadius=i/2}getRay(t,e){const r=o.default.multScalarVec3(o.default.randomInUnitdisk(),this.lenseRadius),n=o.default.multScalarVec3(this.u,r.x),a=o.default.multScalarVec3(this.v,r.y),s=o.default.addVec3(n,a),u=o.default.multScalarVec3(this.horizontal,t),c=o.default.multScalarVec3(this.vertical,e);return new i.default(o.default.addVec3(this.lookFrom,s),o.default.subVec3(o.default.subVec3(o.default.addVec3(o.default.addVec3(this.lowerLeftCorner,u),c),this.lookFrom),s))}getUniformArray(){const t=[];return t.push(...this.lookFrom.array,0),t.push(...this.lowerLeftCorner.array,0),t.push(...this.horizontal.array,0),t.push(...this.vertical.array,0),t.push(...this.u.array,0),t.push(...this.v.array,0),t.push(...this.w.array,0),t.push(this.lenseRadius),new Float32Array(t)}};c=n([u.serializable],c),e.default=c},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=n(r(18)),o=r(8),i=n(r(19)),s=n(r(20)),u=n(r(21)),c=r(2),l=n(r(0));e.default=function(){const t=new o.HittableList,e=new i.default(new l.default(.5,.5,.5));t.add(new u.default(new l.default(0,-1e3,0),1e3,e));for(let e=-11;e<11;e++)for(let r=-11;r<11;r++){const n=c.randomNumber(),o=new l.default(e+.9*c.randomNumber(),.2,r+.9*c.randomNumber());if(l.default.subVec3(o,new l.default(4,.2,0)).length()>.9){let e;if(n<.8){const t=l.default.multVec3(l.default.random(),l.default.random());e=new i.default(t)}else if(n<.95){const t=l.default.randomRange(.5,1),r=c.randomNumberRange(0,.5);e=new s.default(t,r)}else e=new a.default(1.5);t.add(new u.default(o,.2,e))}}const r=new a.default(1.5),n=new i.default(new l.default(.4,.2,.1)),d=new s.default(new l.default(.7,.6,.5),0);return t.add(new u.default(new l.default(1,1,0),1,r)),t.add(new u.default(new l.default(-4,1,0),1,n)),t.add(new u.default(new l.default(4,1,0),1,d)),t}},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var a,o=arguments.length,i=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=a(r(6)),i=a(r(3)),s=r(2),u=a(r(0)),c=r(1);let l=class extends o.default{constructor(t){super(),this._refIdx=t}schlick(t,e){let r=(1-e)/(1+e);return r*=r,r+(1-r)*Math.pow(1-t,5)}scatter(t,e,r,n){r.set(1,1,1);const a=e.front_face?1/this._refIdx:this._refIdx,o=u.default.unit_vector(t.direction),c=Math.min(u.default.dot(o.negate(),e.normal),1);if(a*Math.sqrt(1-c*c)>1){const t=u.default.reflect(o,e.normal);return new i.default(e.p,t).copyTo(n),!0}const l=this.schlick(c,a);if(s.randomNumber()<l){const t=u.default.reflect(o,e.normal);return new i.default(e.p,t).copyTo(n),!0}const d=u.default.refract(o,e.normal,a);return new i.default(e.p,d).copyTo(n),!0}};l=n([c.serializable],l),e.default=l},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var a,o=arguments.length,i=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=a(r(6)),i=a(r(3)),s=a(r(0)),u=r(1);let c=class extends o.default{constructor(t){super(),this.albedo=t}scatter(t,e,r,n){const a=s.default.addVec3(e.normal,s.default.randomUnitVector());return new i.default(e.p,a).copyTo(n),this.albedo.copyTo(r),!0}};c=n([u.serializable],c),e.default=c},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var a,o=arguments.length,i=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=a(r(6)),i=a(r(3)),s=a(r(0)),u=r(1);let c=class extends o.default{constructor(t,e){super(),this.albedo=t,this.roughness=e}scatter(t,e,r,n){const a=s.default.reflect(s.default.unit_vector(t.direction),e.normal);return new i.default(e.p,s.default.addVec3(a,s.default.multScalarVec3(s.default.randomInUnitSphere(),this.roughness))).copyTo(n),this.albedo.copyTo(r),s.default.dot(n.direction,e.normal)>0}};c=n([u.serializable],c),e.default=c},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var a,o=arguments.length,i=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(o<3?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(5),i=a(r(0)),s=a(r(9)),u=r(1);let c=class extends o.Hittable{constructor(t,e,r){super(),this.center=t,this.radius=e,this.mat=r}hit(t,e,r,n){const a=i.default.subVec3(t.origin,this.center),o=t.direction.lengthSquared(),s=i.default.dot(a,t.direction),u=s*s-o*(a.lengthSquared()-this.radius*this.radius);if(u>0){const a=Math.sqrt(u);let c=(-s-a)/o;if(c<r&&c>e){n.t=c,n.p=t.at(n.t);const e=i.default.divScalarVec(i.default.subVec3(n.p,this.center),this.radius);return n.set_face_normal(t,e),n.mat=this.mat,!0}if(c=(-s+a)/o,c<r&&c>e){n.t=c,n.p=t.at(n.t);const e=i.default.divScalarVec(i.default.subVec3(n.p,this.center),this.radius);return n.set_face_normal(t,e),n.mat=this.mat,!0}}return!1}boundingBox(t){return new s.default(i.default.subVec3(this.center,new i.default(this.radius,this.radius,this.radius)),i.default.addVec3(this.center,new i.default(this.radius,this.radius,this.radius))).copyTo(t),!0}};c=n([u.serializable],c),e.default=c}]);